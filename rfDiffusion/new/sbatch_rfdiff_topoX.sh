#!/bin/bash

#SBATCH --job-name=V3g
#SBATCH --partition=gpu
#SBATCH --exclude=node050,node051
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --export=ALL
#SBATCH --gres=gpu:1
#SBATCH --mem=50Gb


source ~/.bashrc
module load CUDA
conda activate RFdif7
export PYTHONPATH=/home/dwkulp/software/miniconda3/envs/RFdif7/lib/python3.9/site-packages/:/home/dwkulp/software/miniconda3/lib/python3.9/site-packages/:/home/dwkulp/software/Rosetta-DL/Rosetta-DL/RFdiffusion/env/SE3Transformer/


# Contigs
# 1: I411-420
# 2: I321-334
# 3: I293-303
# 4: I131-158

# Full Combos:
#[2-30/I411-420/6-30/I293-303/6-30/I131-158/6-30/I321-334/2-30/0 K1-28]
#[2-30/I321-334/6-30/I131-158/6-30/I411-420/6-30/I293-303/2-30/0 K1-28]
#[2-30/I411-420/6-30/I293-303/6-30/I321-334/6-30/I131-158/2-30/0 K1-28]
#[2-30/I131-158/6-30/I321-334/6-30/I293-303/6-30/I411-420/2-30/0 K1-28]
#[2-30/I321-334/6-30/I131-158/6-30/I293-303/6-30/I411-420/2-30/0 K1-28]
#[2-30/I411-420/6-30/I321-334/6-30/I293-303/6-30/I131-158/2-30/0 K1-28]
#[2-30/I411-420/6-30/I131-158/6-30/I321-334/6-30/I293-303/2-30/0 K1-28]
#[2-30/I411-420/6-30/I131-158/6-30/I293-303/6-30/I321-334/2-30/0 K1-28]
#[2-30/I293-303/6-30/I131-158/6-30/I411-420/6-30/I321-334/2-30/0 K1-28]
#[2-30/I131-158/6-30/I411-420/6-30/I321-334/6-30/I293-303/2-30/0 K1-28]
#[2-30/I131-158/6-30/I411-420/6-30/I293-303/6-30/I321-334/2-30/0 K1-28]
#[2-30/I131-158/6-30/I293-303/6-30/I411-420/6-30/I321-334/2-30/0 K1-28]
#[2-30/I293-303/6-30/I131-158/6-30/I321-334/6-30/I411-420/2-30/0 K1-28]
#[2-30/I293-303/6-30/I411-420/6-30/I131-158/6-30/I321-334/2-30/0 K1-28]
#[2-30/I321-334/6-30/I411-420/6-30/I131-158/6-30/I293-303/2-30/0 K1-28]
#[2-30/I131-158/6-30/I321-334/6-30/I411-420/6-30/I293-303/2-30/0 K1-28]
#[2-30/I293-303/6-30/I321-334/6-30/I131-158/6-30/I411-420/2-30/0 K1-28]
#[2-30/I321-334/6-30/I293-303/6-30/I131-158/6-30/I411-420/2-30/0 K1-28]
#[2-30/I321-334/6-30/I293-303/6-30/I411-420/6-30/I131-158/2-30/0 K1-28]
#[2-30/I293-303/6-30/I321-334/6-30/I411-420/6-30/I131-158/2-30/0 K1-28]
#[2-30/I293-303/6-30/I411-420/6-30/I321-334/6-30/I131-158/2-30/0 K1-28]
#[2-30/I131-158/6-30/I293-303/6-30/I321-334/6-30/I411-420/2-30/0 K1-28]
#[2-30/I321-334/6-30/I411-420/6-30/I293-303/6-30/I131-158/2-30/0 K1-28]
#[2-30/I411-420/6-30/I321-334/6-30/I131-158/6-30/I293-303/2-30/0 K1-28]



# 24 permutations
contig=""
if [ "$topo" -eq "1" ]
   then
       contig="[2-30/I411-420/6-30/I293-303/6-30/I131-140/I149-158/6-30/I321-334/2-30/0 K1-28]"
fi
if [ "$topo" -eq "2" ]
   then
       contig="[2-30/I321-334/6-30/I131-140/I149-158/6-30/I411-420/6-30/I293-303/2-30/0 K1-28]"
fi
if [ "$topo" -eq "3" ]
   then
       contig="[2-30/I411-420/6-30/I293-303/6-30/I321-334/6-30/I131-140/I149-158/2-30/0 K1-28]"
fi
if [ "$topo" -eq "4" ]
   then
       contig="[2-30/I131-140/I149-158/6-30/I321-334/6-30/I293-303/6-30/I411-420/2-30/0 K1-28]"
fi
if [ "$topo" -eq "5" ]
   then
       contig="[2-30/I321-334/6-30/I131-140/I149-158/6-30/I293-303/6-30/I411-420/2-30/0 K1-28]"
fi
if [ "$topo" -eq "6" ]
   then
       contig="[2-30/I411-420/6-30/I321-334/6-30/I293-303/6-30/I131-140/I149-158/2-30/0 K1-28]"
fi
if [ "$topo" -eq "7" ]
   then
       contig="[2-30/I411-420/6-30/I131-140/I149-158/6-30/I321-334/6-30/I293-303/2-30/0 K1-28]"
fi
if [ "$topo" -eq "8" ]
   then
       contig="[2-30/I411-420/6-30/I131-140/I149-158/6-30/I293-303/6-30/I321-334/2-30/0 K1-28]"
fi
if [ "$topo" -eq "9" ]
   then
       contig="[2-30/I293-303/6-30/I131-140/I149-158/6-30/I411-420/6-30/I321-334/2-30/0 K1-28]"
fi
if [ "$topo" -eq "10" ]
   then
       contig="[2-30/I131-140/I149-158/6-30/I411-420/6-30/I321-334/6-30/I293-303/2-30/0 K1-28]"
fi
if [ "$topo" -eq "11" ]
   then
       contig="[2-30/I131-140/I149-158/6-30/I411-420/6-30/I293-303/6-30/I321-334/2-30/0 K1-28]"
fi
if [ "$topo" -eq "12" ]
   then
       contig="[2-30/I131-140/I149-158/6-30/I293-303/6-30/I411-420/6-30/I321-334/2-30/0 K1-28]"
fi
if [ "$topo" -eq "13" ]
   then
       contig="[2-30/I293-303/6-30/I131-140/I149-158/6-30/I321-334/6-30/I411-420/2-30/0 K1-28]"
fi
if [ "$topo" -eq "14" ]
   then
       contig="[2-30/I293-303/6-30/I411-420/6-30/I131-140/I149-158/6-30/I321-334/2-30/0 K1-28]"
fi
if [ "$topo" -eq "15" ]
   then
       contig="[2-30/I321-334/6-30/I411-420/6-30/I131-140/I149-158/6-30/I293-303/2-30/0 K1-28]"
fi
if [ "$topo" -eq "16" ]
   then
       contig="[2-30/I131-140/I149-158/6-30/I321-334/6-30/I411-420/6-30/I293-303/2-30/0 K1-28]"
fi
if [ "$topo" -eq "17" ]
   then
       contig="[2-30/I293-303/6-30/I321-334/6-30/I131-140/I149-158/6-30/I411-420/2-30/0 K1-28]"
fi
if [ "$topo" -eq "18" ]
   then
       contig="[2-30/I321-334/6-30/I293-303/6-30/I131-140/I149-158/6-30/I411-420/2-30/0 K1-28]"
fi
if [ "$topo" -eq "19" ]
   then
       contig="[2-30/I321-334/6-30/I293-303/6-30/I411-420/6-30/I131-140/I149-158/2-30/0 K1-28]"
fi
if [ "$topo" -eq "20" ]
   then
       contig="[2-30/I293-303/6-30/I321-334/6-30/I411-420/6-30/I131-140/I149-158/2-30/0 K1-28]"
fi
if [ "$topo" -eq "21" ]
   then
       contig="[2-30/I293-303/6-30/I411-420/6-30/I321-334/6-30/I131-140/I149-158/2-30/0 K1-28]"
fi
if [ "$topo" -eq "22" ]
   then
       contig="[2-30/I131-140/I149-158/6-30/I293-303/6-30/I321-334/6-30/I411-420/2-30/0 K1-28]"
fi
if [ "$topo" -eq "23" ]
   then
       contig="[2-30/I321-334/6-30/I411-420/6-30/I293-303/6-30/I131-140/I149-158/2-30/0 K1-28]"
fi
if [ "$topo" -eq "24" ]
   then
       contig="[2-30/I411-420/6-30/I321-334/6-30/I131-140/I149-158/6-30/I293-303/2-30/0 K1-28]"
fi

prefix=`printf "V3g_topo%02d" $topo`;
echo "PRE: $prefix"
echo "CONTIG: $contig"

/home/dwkulp/software/Rosetta-DL/Rosetta-DL/RFdiffusion/run_inference.py inference.output_prefix=./$prefix inference.input_pdb=../../V3glycanContigs.pdb "contigmap.contigs=$contig" inference.num_designs=1000
